{% load static %}

<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Explore</title>

<script src="https://kit.fontawesome.com/cb792c0850.js" crossorigin="anonymous"></script>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
background: linear-gradient(135deg,#eef2ff,#fdf2f8,#ecfeff);
font-family: 'Segoe UI', sans-serif;
transition:0.3s;
overflow-x:hidden;
}

/* SIDEBAR */
.sidebar{
background:#ffffff;
height:100vh;
width:240px;
position:fixed;
box-shadow:2px 0 15px rgba(0,0,0,0.05);
z-index:100;
}

/* PROFILE */
.profile-pic{
width:65px;
height:65px;
border-radius:50%;
object-fit:cover;
}

/* MAIN GRID AREA */
.explore-wrapper{
margin-left:260px;
padding:40px 20px;
}

/* EXACT 3 PER ROW */
.explore-container{
display:grid;
grid-template-columns:repeat(3, 320px);
justify-content:center;
gap:30px;
}

/* CARD */
.post-card{
background:white;
border-radius:18px;
overflow:hidden;
box-shadow:0 8px 20px rgba(0,0,0,0.08);
transition:0.3s;
position:relative;
width:320px;
}

.post-card:hover{
transform:translateY(-6px);
box-shadow:0 15px 35px rgba(0,0,0,0.18);
}

/* IMAGE SMALLER */
.post-img{
width:100%;
height:260px;
object-fit:cover;
transition:0.4s;
}

.post-card:hover .post-img{
transform:scale(1.04);
}

/* USERNAME */
.username{
position:absolute;
top:10px;
left:12px;
background:rgba(0,0,0,0.6);
color:white;
padding:5px 12px;
border-radius:20px;
font-size:13px;
text-decoration:none;
font-weight:500;
}

.username:hover{
background:black;
}

/* CAPTION */
.caption{
padding:12px;
font-weight:500;
color:#444;
text-align:center;
font-size:14px;
}

/* DARK MODE */
.dark{
background:#0f172a !important;
color:white;
}

.dark .sidebar{background:#020617;color:white;}
.dark .post-card{background:#020617;color:white;}
.dark .caption{color:#ddd;}
.dark a{color:white;}
</style>

</head>

<body>

<!-- DARK MODE BUTTON -->

<button onclick="toggleDark()" 
style="position:fixed;top:20px;right:25px;z-index:999;"
class="btn btn-dark">
ðŸŒ™ Dark </button>

<!-- SIDEBAR -->

<nav class="sidebar">

<div class="text-center mt-4">
<img src="{{profile.profileimg.url}}" class="profile-pic" >

<h4 class="mt-2">
<a href="{% url 'profile' request.user.username %}" style="text-decoration:none;">
@{{user}}
</a>
</h4>
</div>

<ul class="nav flex-column mt-5 px-3">

<li class="nav-item mb-2">
<a class="nav-link" href="{% url 'home' %}">
<i class="fa-solid fa-house"></i> Home
</a>
</li>

<li class="nav-item mb-2">
<a class="nav-link active" href="/explore">
<i class="fa-solid fa-compass"></i> Explore
</a>
</li>

<li class="nav-item mb-2">
<a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#exampleModal3">
<i class="fa-solid fa-magnifying-glass"></i> Search
</a>
</li>

<li class="nav-item mb-2">
<a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#exampleModal">
<i class="fa-solid fa-circle-plus"></i> Create Post
</a>
</li>

<li class="nav-item mb-2">
<a class="nav-link" href="{% url 'profile' request.user.username %}">
<i class="fa-solid fa-user"></i> Profile
</a>
</li>

<li class="nav-item">
<a class="nav-link text-danger" href="{% url 'logout' %}">
<i class="fa-solid fa-right-from-bracket"></i> Logout
</a>
</li>

</ul>
</nav>

<!-- POSTS SECTION -->

<div class="explore-wrapper">

<div class="explore-container">

{% for post in posts %}

<div class="post-card">

{% if post.image %} <img src="{{post.image.url}}" class="post-img">
{% endif %}

<a href="{% url 'profile' post.user %}" class="username">
@{{post.user}}
</a>

<div class="caption">
{{post.caption}}
</div>

</div>
{% endfor %}

</div>
</div>

<!-- MODALS -->

{% include "modal.html" %}
{% include "search.html" %}

<script>
function toggleDark(){
document.body.classList.toggle("dark")
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
